<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>WOMANIYA â€“ Period tracker</title>
<link rel="stylesheet" href="assets/styles.css"/>
<style>
  body { font-family: 'Segoe UI', sans-serif; background:#fefaff; margin:0; padding:0;}
  .panel { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px;}
  h2 { color:#6d2aa3; }
  .form label { display:block; margin-bottom:10px; }
  .form input { width:100%; padding:8px 10px; margin-top:4px; border-radius:6px; border:1px solid #ccc; }
  .btn { padding: 10px 16px; border:none; border-radius:6px; cursor:pointer; margin-top:8px; }
  .btn.primary { background: #6d2aa3; color:white; }
  .btn.danger { background:#e74c3c; color:white; }
  .list { margin-top:15px; }
  .item { background:#f8f4ff; border:1px dashed #dcd3ff; border-radius:10px; padding:12px; margin-bottom:10px; position:relative; transition:0.2s; }
  .item:hover { box-shadow:0 2px 10px rgba(0,0,0,0.1); }
  .delete-btn { position:absolute; top:8px; right:8px; background:#ff5b7e; color:white; border:none; border-radius:5px; cursor:pointer; padding:4px 6px; font-size:12px; }
  @media(max-width:600px){ .panel { padding:15px; } }
</style>
</head>
<body class="theme-soft">

<header class="site-header">
  <div class="logo">ðŸ’– WOMANIYA</div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="tracker.html" class="active">Period tracker</a>
    <a href="symptoms.html">Symptoms guide</a>
    <a href="wellness.html">Sleep & diet</a>
    <a href="resources.html">Resources</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<main style="padding:20px; max-width:800px; margin:auto;">
  <div class="panel">
    <h2>Log your cycle</h2>
    <form id="cycleForm" class="form">
      <label>
        Last period start date
        <input type="date" id="lastStartDate" required/>
      </label>
      <label>
        Average cycle length (days)
        <input type="number" id="avgCycleLength" min="20" max="45" value="28" required/>
      </label>
      <label>
        Typical period length (days)
        <input type="number" id="periodLength" min="2" max="10" value="5" required/>
      </label>
      <button type="submit" class="btn primary">Save cycle</button>
    </form>
  </div>

  <div class="panel">
    <h2>Your saved cycles</h2>
    <div id="cyclesList" class="list"></div>
    <button class="btn danger" id="clearDataBtn">Clear all saved cycles</button>
  </div>
</main>

<script>
const form = document.getElementById("cycleForm");
const list = document.getElementById("cyclesList");
const clearBtn = document.getElementById("clearDataBtn");

// Load saved cycles
let cycles = JSON.parse(localStorage.getItem("cycles") || "[]");

// Render saved cycles
function renderCycles() {
  list.innerHTML = "";
  if (cycles.length === 0) {
    list.innerHTML = "<p style='color:#555;'>No saved cycles yet.</p>";
    return;
  }
  cycles.forEach((cycle, index) => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <strong>Last period:</strong> ${cycle.lastStart}<br>
      <strong>Avg cycle:</strong> ${cycle.avgCycle} days<br>
      <strong>Period length:</strong> ${cycle.periodLength} days
      <button class="delete-btn" data-index="${index}">ðŸ—‘ Delete</button>
    `;
    list.appendChild(div);
  });

  // Attach delete buttons
  list.querySelectorAll(".delete-btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      const i = e.target.getAttribute("data-index");
      cycles.splice(i,1);
      localStorage.setItem("cycles", JSON.stringify(cycles));
      renderCycles();
    });
  });
}

// Initial render
renderCycles();

// Save new cycle
form.addEventListener("submit", (e) => {
  e.preventDefault();
  const lastStart = document.getElementById("lastStartDate").value;
  const avgCycle = document.getElementById("avgCycleLength").value;
  const periodLength = document.getElementById("periodLength").value;

  if(!lastStart) return alert("Please enter last period start date.");

  cycles.push({ lastStart, avgCycle, periodLength });
  localStorage.setItem("cycles", JSON.stringify(cycles));
  renderCycles();
  form.reset();
});

// Clear all cycles
clearBtn.addEventListener("click", () => {
  if(confirm("Are you sure you want to clear all saved cycles?")) {
    cycles = [];
    localStorage.removeItem("cycles");
    renderCycles();
  }
});
</script>

</body>
</html>
